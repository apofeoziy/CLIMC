# Minecraft Server Manager

Инструмент для управления плагинами и сервером Minecraft через командную строку.

## Возможности

- Управление списком плагинов через файл `pl.txt`
- Автоматическое скачивание плагинов
- Проверка наличия ядра сервера
- Возможность скачать последнюю версию PaperMC
- Интеграция с Modrinth для поиска и установки плагинов
- Взаимодействие через интерактивный CLI с поддержкой флагов
- Поддержка .gitignore для удобной работы с Git

## Установка

1. Клонируйте репозиторий или скопируйте файлы в директорию сервера Minecraft
2. Установите зависимости:

```bash
npm install
```

3. Сделайте скрипт исполняемым:

```bash
npm link
```

## Использование

### Основные команды

```
server-manager [команда] [опции]
```

Доступные команды:

- `check` - Проверить наличие ядра сервера и статус плагинов (по умолчанию)
- `download` - Скачать все плагины из списка
- `list` - Показать список плагинов
- `add [имя]` - Добавить новый плагин
  - `-m, --modrinth` - Искать плагин на Modrinth
  - `-d, --direct` - Добавить плагин по прямой ссылке
- `remove` - Удалить плагин из списка
- `update` - Обновить все плагины

### Команды для работы с Modrinth

- `modrinth-search <запрос>` (или `ms <запрос>`) - Поиск плагинов на Modrinth
  - `-v, --mc-version <версия>` - Указать версию Minecraft
  - `-l, --limit <число>` - Ограничить количество результатов
- `modrinth-update` (или `mu`) - Проверить обновления плагинов с Modrinth
- `modrinth-add [запрос]` (или `ma [запрос]`) - Добавить плагин с Modrinth
  - `-v, --mc-version <версия>` - Указать версию Minecraft
- `scan` (или `s`) - Сканировать директорию плагинов и искать плагины на Modrinth

### Команды для работы с плагинами

- `scan` (или `s`) - Сканировать директорию плагинов и искать плагины на Modrinth
  - `-a, --auto` - Автоматический режим без запросов
- `auto-add` (или `aa`) - Автоматически добавить все найденные плагины без запросов

### Пример использования

```bash
# Проверить наличие ядра и статус плагинов
server-manager check

# Добавить новый плагин с выбором источника
server-manager add

# Быстро добавить плагин с Modrinth с поиском по имени
server-manager add vault -m

# Поиск плагинов на Modrinth с указанием версии Minecraft
server-manager ms essentials -v 1.21.4

# Добавить плагин с Modrinth напрямую с указанием версии
server-manager ma coreprotect -v 1.21.4

# Скачать все плагины из списка
server-manager download
```

## Формат файла pl.txt

Файл `pl.txt` содержит список плагинов в следующем формате:

```
# Комментарий
имя_плагина|версия|ссылка_на_скачивание|источник
```

Где источник может быть:
- `direct` - прямая ссылка на JAR файл
- `modrinth` - плагин с Modrinth (ссылка в этом случае - это ID проекта)

Пример:

```
# Основные плагины
EssentialsX|2.19.7|https://github.com/EssentialsX/Essentials/releases/download/2.19.7/EssentialsX-2.19.7.jar|direct
Vault|1.7.3|https://www.spigotmc.org/resources/vault.34315/download?version=344916|direct
CoreProtect|21.3|1jOH9VhP|modrinth
```

## Работа с Git

Репозиторий уже содержит `.gitignore` файл, который игнорирует:
- Файлы `.jar` (кроме `server.jar`)
- Директории миров и логов
- Файлы с данными игроков
- Другие временные файлы

Это позволяет легко делиться конфигурацией сервера без передачи больших бинарных файлов.

# Автоматическое добавление плагинов

Для полностью автоматического добавления плагинов используйте:

```bash
server-manager auto-add
```

или

```bash
server-manager scan --auto
```

В автоматическом режиме:
1. Скрипт сканирует директорию `plugins/`
2. Для каждого найденного JAR-файла выполняет поиск на Modrinth
3. Автоматически добавляет первый найденный результат в pl.txt
4. Затем скачивает все добавленные плагины

Это идеально подходит для быстрого создания файла pl.txt на основе существующих плагинов без необходимости ручного выбора.

# Автоматическое сканирование плагинов

Для быстрого заполнения файла pl.txt на основе уже имеющихся плагинов, используйте команду:

```bash
server-manager scan
```

Эта команда:
1. Сканирует директорию `plugins/` на наличие JAR-файлов
2. Извлекает названия плагинов из имен файлов
3. Автоматически ищет соответствия на Modrinth
4. Предлагает вам выбрать правильные плагины и версии
5. Добавляет выбранные плагины в pl.txt 